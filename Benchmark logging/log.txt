


========================== RESULTS BEFORE TRIMMING DOWN THE CODE ===============================

python run_gradient_em_attack.py --em_iter 0 --total_grad_iter 10000 --dataset german --use_slab --epsilon 0.5 --method IAF --sensitive_feature_idx 36 --sensitive_attr_filename german_group_label.npz

*** Iter: 109
weights shape is  (59,)
Projected 2 examples.
Average distance to cluster center (overall): 6.006270141601562
Average distance to cluster center (poisoned): 3.770278513431549
Average diff in X_train among poisoned indices = 0.3591627
Fraction of 0 gradient points: 0.0
Average distance moved by points that moved: 0.3591627
After training with CG: 
Train loss (w reg) on all data: 0.63644654
Train loss (w/o reg) on all data: 0.5731832
Test loss (w/o reg) on all data: 1.0458676
Train acc on all data:  0.7525
Test acc on all data:   0.57
******************Poison model parity bias on Test0.8332288401253918
******************Poison model EO bias on Test0.8324949536450262
Norm of the mean of gradients: 0.0003107947
Norm of the params: 1.1856867

================================================================================================

Using <= instead of <

Average distance to cluster center (overall): 5.975032958984375
Average distance to cluster center (poisoned): 3.669628083705902
Average diff in X_train among poisoned indices = 0.4402163
Fraction of 0 gradient points: 0.0
Average distance moved by points that moved: 0.4402163
After training with CG: 
Train loss (w reg) on all data: 0.804984
Train loss (w/o reg) on all data: 0.7670241
Test loss (w/o reg) on all data: 0.9741391
Train acc on all data:  0.7491666666666666
Test acc on all data:   0.58
******************Poison model parity bias on Test0.961128526645768
******************Poison model EO bias on Test0.9611858900574559
Norm of the mean of gradients: 0.0018989112
Norm of the params: 0.9184514

================================================================================================

Using <= + 1e-4 instead of <

Average distance to cluster center (overall): 5.961040242513021
Average distance to cluster center (poisoned): 3.6285232305526733
Average diff in X_train among poisoned indices = 0.86331075
Fraction of 0 gradient points: 0.0
Average distance moved by points that moved: 0.86331075
After training with CG: 
Train loss (w reg) on all data: 0.57464916
Train loss (w/o reg) on all data: 0.50820965
Test loss (w/o reg) on all data: 0.95800555
Train acc on all data:  0.785
Test acc on all data:   0.59
******************Poison model parity bias on Test0.7667711598746081
******************Poison model EO bias on Test0.7620006442796545
Norm of the mean of gradients: 0.0003156467
Norm of the params: 1.215086